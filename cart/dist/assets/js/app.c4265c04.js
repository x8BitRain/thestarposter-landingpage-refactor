(function(t){function e(e){for(var r,s,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)s=o[d],i[s]&&p.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/cart/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("c21b"),i=n.n(r);i.a},"050d":function(t,e,n){},"223a":function(t,e,n){"use strict";var r=n("39c0"),i=n.n(r);i.a},"252e":function(t,e,n){"use strict";var r=n("050d"),i=n.n(r);i.a},"39c0":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"initialize",function(){return X}),n.d(r,"refreshCart",function(){return Z}),n.d(r,"refreshCheckoutURL",function(){return et}),n.d(r,"deleteItemfromCart",function(){return rt});n("cadf"),n("551c"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Cart",{attrs:{lineItems:t.lineItems,checkoutURL:t.checkoutURL,lineItemsLoaded:t.lineItemsLoaded}})],1)},s=[],o=(n("96cf"),n("3040")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui center aligned fluid container",staticStyle:{"max-width":"60em !important"}},[n("h1",[t._v(t._s(t.$t("cart")))]),t.cartIsEmpty?n("div",[n("div",{staticClass:"errMessage"},[t._v(t._s(t.$t("cartIsEmpty")))])]):n("div",[n("table",{staticClass:"ui very basic padded unstackable table"},[n("thead",[n("tr",[n("th",{staticClass:"one wide"},[t._v(t._s(t.$t("preview")))]),n("th",{staticClass:"thirteen wide"},[t._v(t._s(t.$t("product")))]),n("th",{staticClass:"two wide center aligned"},[t._v(t._s(t.$t("price")))])])]),t._l(t.lineItems,function(t){return n("LineItem",{key:t.productId,attrs:{item:t}})}),n("tr",[n("th",{staticClass:"right aligned",attrs:{colspan:"2"}},[t._v(t._s(t.$t("currentSum")))]),n("th",{staticClass:"center aligned"},[t._v(t._s(parseFloat(t.cartSum).toFixed(2))+"€")])])],2),n("CartNavButtons",{attrs:{checkoutURL:t.checkoutURL,cartIsEmpty:t.cartIsEmpty,lineItems:t.lineItems}})],1)])},l=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tbody",[n("tr",[n("td",{staticClass:"collapsing"},[n("img",{directives:[{name:"show",rawName:"v-show",value:t.isImgLoaded,expression:"isImgLoaded"}],staticClass:"lineItem__thumbnail",attrs:{src:t.imageUrl},on:{click:t.showPreviewModal,load:function(e){t.isImgLoaded=!0}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isImgLoaded,expression:"!isImgLoaded"}],staticClass:"ui active inline loader"})]),n("td",[n("div",{staticClass:"lineItem__title"},[t._v(t._s(t.titleKey))]),n("div",{staticClass:"lineItem__editorProperties-container"},t._l(t.item.editorProperties,function(e,r){return n("div",{key:r},[t._v("\n          "+t._s(r)+": "+t._s(e)+"\n        ")])}))]),n("td",{staticClass:"center aligned"},[t._v("\n      "+t._s(parseFloat(t.item.price).toFixed(2))+"€\n    ")])]),n("tr",[n("td",{attrs:{colspan:"3"}},[n("div",{staticClass:"lineItem__button--container"},[n("button",{staticClass:"button primary",attrs:{disabled:!t.isImgLoaded},on:{click:t.showPreviewModal}},[t._v("\n          "+t._s(t.$t("preview"))+"\n        ")]),n("a",{attrs:{href:t.modifyPosterUrl}},[n("button",{staticClass:"button"},[t._v("\n            "+t._s(t.$t("edit"))+"\n          ")])]),n("button",{staticClass:"button",on:{click:t.removePosterFromCart}},[t._v("\n          "+t._s(t.$t("delete"))+"\n        ")])])])]),t.isPreviewModalVisible?n("PreviewModal",{attrs:{imageUrl:t.imageUrl},on:{close:t.closePreviewModal}},[t._v(">")]):t._e()],1)},d=[],p=(n("ac6a"),n("8615"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-backdrop"},[n("div",{staticClass:"modal"},[n("button",{on:{click:t.close}},[t._v(t._s(t.$t("close")))]),n("img",{attrs:{src:t.imageUrl}})])])}),h=[],f={name:"PreviewModal",props:{imageUrl:String},methods:{close:function(){this.$emit("close")}}},m=f,v=(n("e50a"),n("2877")),b=Object(v["a"])(m,p,h,!1,null,"1cb5718c",null);b.options.__file="PreviewModal.vue";var g=b.exports,_=(n("28a5"),n("6762"),n("2fdb"),n("a481"),document.querySelector("body").getAttribute("lang"));if(void 0===_)throw new Error("No language was set. Set it as <body lang='lng'>");var w=_,C=window.location.host,k="https://editor."+C,y="https://secure."+C,I=function(){return C.replace("cart.","").replace("https://","")};if(window.location.host.includes("localhost")&&(k="http://"+window.location.host.split(":")[0]+":8080",y="https://secure.thestarposter.com.yoursky.space"),window.location.host.includes("cart.nachthimmel.shop")){var P=I(C);k="https://editor."+P,y="https://"+P}var x={name:"LineItem",props:{item:Object},data:function(){return{isPreviewModalVisible:!1,isDeleted:!1,isImgLoaded:!1}},methods:{showPreviewModal:function(){this.isPreviewModalVisible=!0},closePreviewModal:function(){this.isPreviewModalVisible=!1},removePosterFromCart:function(){this.$cartProvider.deleteItemfromCart(this.item.productId)}},computed:{imageUrl:function(){return"".concat("/backend","/posters/").concat(this.item.productId,"/preview.jpg")},modifyPosterUrl:function(){var t="PDF"===this.item.lineItemProperties.delivery?"1030596624428":"7030690480172";return"".concat(k,"/?edit=true&productId=").concat(t,"&posterId=").concat(this.item.productId)},titleKey:function(){var t=Object.values(this.item.lineItemProperties).join(".");return this.$t(this.item.productType+":product."+t+".title")}},components:{PreviewModal:g}},L=x,$=(n("252e"),Object(v["a"])(L,u,d,!1,null,"13b281e5",null));$.options.__file="LineItem.vue";var U=$.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui left aligned container"},[t.cartIsEmpty?n("div",{staticClass:"cart__nav-button",attrs:{id:"btnAddFirstProduct"}},[n("a",{attrs:{href:t.newPosterUrl}},[n("button",{staticClass:"button"},[t._v("\n        "+t._s(t.$t("addFirstProduct"))+"\n      ")])])]):n("div",{staticClass:"underPrices"},[n("div",{staticClass:"ui checkbox legalChecks"},[n("input",{attrs:{type:"checkbox"},on:{click:t.toggleAGB}}),n("label",[t._v(t._s(t.$t("agreeToTermsCheckbox.pre"))),n("a",{attrs:{href:t.$t("agreeToTermsCheckbox.linkHref")}},[t._v(t._s(t.$t("agreeToTermsCheckbox.linkDesc")))]),t._v(t._s(t.$t("agreeToTermsCheckbox.post")))])]),t.digitalProductsInCard?n("div",{staticClass:"ui checkbox legalChecks"},[n("input",{attrs:{type:"checkbox"},on:{click:t.toggleCancellationDisclaimer}}),n("label",{attrs:{for:"agree1"}},[t._v(t._s(t.$t("agreeCancellationCheckbox")))])]):t._e(),n("div",{staticClass:"cart__nav-buttons"},[n("a",{attrs:{href:t.newPosterUrl}},[n("button",{staticClass:"ui button"},[t._v("\n          "+t._s(t.$t("addProduct"))+"\n        ")])]),n("a",{class:{loading:void 0===t.checkoutURL},attrs:{href:t.buyNowUrl}},[n("button",{staticClass:"ui primary button ",attrs:{disabled:t.isCheckoutButtonDisabled}},[t._v("\n        "+t._s(t.$t("checkout"))+" \n        ")])])])])])},R=[],O=(n("7514"),{name:"CartNavButtons",data:function(){return{isAGBChecked:!1,isCancellationDisclaimerChecked:!1}},methods:{toggleAGB:function(){this.isAGBChecked=!this.isAGBChecked},toggleCancellationDisclaimer:function(){this.isCancellationDisclaimerChecked=!this.isCancellationDisclaimerChecked}},props:{checkoutURL:String,lineItems:Array,cartIsEmpty:Boolean},computed:{newPosterUrl:function(){return k},buyNowUrl:function(){return"".concat(y).concat(this.checkoutURL)},isCheckoutButtonDisabled:function(){return!this.isAGBChecked||this.digitalProductsInCard&&!this.isCancellationDisclaimerChecked},digitalProductsInCard:function(){return void 0!==this.lineItems.find(function(t){return"digital"===t.fulfillment})}}}),E=O,T=(n("f202"),Object(v["a"])(E,j,R,!1,null,null,null));T.options.__file="CartNavButtons.vue";var M=T.exports,S={props:{lineItems:Array,checkoutURL:String,lineItemsLoaded:Boolean},computed:{cartSum:function(){return this.lineItems.reduce(function(t,e){return t+e.price},0)},cartIsEmpty:function(){return this.lineItemsLoaded&&0===this.lineItems.length}},components:{LineItem:U,CartNavButtons:M}},B=S,D=(n("223a"),Object(v["a"])(B,c,l,!1,null,null,null));D.options.__file="Cart.vue";var A=D.exports,N={name:"app",data:function(){return{lineItems:[],checkoutURL:void 0,lineItemsLoaded:!1}},beforeCreate:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$cartProvider.initialize(this);case 2:return this.$cartProvider.refreshCheckoutURL(),t.next=5,this.$cartProvider.refreshCart();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),components:{Cart:A}},F=N,G=(n("034f"),Object(v["a"])(F,a,s,!1,null,null,null));G.options.__file="App.vue";var V=G.exports,J=n("8ca8"),z=n("cf6d"),K=n.n(z),q=n("af2d"),H=n.n(q),Q=(n("386d"),"/backend"),W=void 0;function X(t){return Y.apply(this,arguments)}function Y(){return Y=Object(o["a"])(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(W=e,n=at(),!n.productId){t.next=17;break}return r={productId:n.productId,productType:n.productType,lineItemProperties:n.lineItemProperties},t.next=6,fetch(Q+"/cart/"+r.productId,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(r)});case 6:if(i=t.sent,!(i.status>400)){t.next=16;break}return t.t0=Error,t.next=11,i.text();case 11:throw t.t1=t.sent,t.t2="Could not add item: "+t.t1,new t.t0(t.t2);case 16:history.replaceState&&history.replaceState(null,"","?");case 17:case"end":return t.stop()}},t,this)})),Y.apply(this,arguments)}function Z(){return tt.apply(this,arguments)}function tt(){return tt=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(Q+"/cart/"+window.lng,{method:"GET",credentials:"include"});case 2:return e=t.sent,t.next=5,e.json();case 5:n=t.sent,W.lineItems=Object.values(n.lineItems),W.lineItemsLoaded=!0;case 8:case"end":return t.stop()}},t,this)})),tt.apply(this,arguments)}function et(){return nt.apply(this,arguments)}function nt(){return nt=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return W.checkoutURL=void 0,t.next=3,fetch(Q+"/cart/checkout/"+window.lng,{method:"GET",credentials:"include"});case 3:return e=t.sent,t.next=6,e.text();case 6:n=t.sent,W.checkoutURL=n;case 8:case"end":return t.stop()}},t,this)})),nt.apply(this,arguments)}function rt(t){return it.apply(this,arguments)}function it(){return it=Object(o["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Q,"/cart/").concat(e),{method:"DELETE",credentials:"include"});case 2:W.lineItemsLoaded=!0,Z(),et();case 5:case"end":return t.stop()}},t,this)})),it.apply(this,arguments)}function at(){var t={},e=decodeURIComponent(location.search.substring(1));return e.split("&").forEach(function(e){var n=e.split("=")[0],r=e.split("=")[1];if(n.includes("[")){var i=n.split("["),a=i[0],s=i[1].substring(0,i[1].length-1);void 0===t[a]&&(t[a]={}),t[a][s]=r}else t[n]=r}),t}i["a"].config.productionTip=!1,i["a"].use(H.a),i["a"].prototype.$cartProvider=r,window.lng=w;var st={backend:{loadPath:"/backend/translations/{{lng}}/{{ns}}.json"},ns:["editor","starmap"],defaultNS:"editor",lng:window.lng,fallbackLng:"de",debug:!1};J["a"].use(K.a).init(st);var ot=new H.a(J["a"]);new i["a"]({render:function(t){return t(V)},i18n:ot}).$mount("#app")},"72bb":function(t,e,n){},c21b:function(t,e,n){},d11b:function(t,e,n){},e50a:function(t,e,n){"use strict";var r=n("d11b"),i=n.n(r);i.a},f202:function(t,e,n){"use strict";var r=n("72bb"),i=n.n(r);i.a}});
//# sourceMappingURL=app.c4265c04.js.map